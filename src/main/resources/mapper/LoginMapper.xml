<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zzuli.lesson.mapper.LoginMapper">

	<select id="queryPasswordByUsername" parameterType="String"
		resultType="String">
		SELECT password
		FROM user
		WHERE username = #{username}
	</select>

	<select id="queryRoleByUsername" parameterType="String"
		resultType="String">
		SELECT role.role
		FROM user
		INNER JOIN role
		ON user.role_id = role.id
		WHERE username = #{username}
	</select>
	<select id="queryUserId" resultType="java.lang.Integer">
		SELECT id
		FROM user
		WHERE username = #{username}
	</select>
	<select id="queryTeaNameByUsername" parameterType="String"
		resultType="String">
		SELECT tea_name
		FROM user
		WHERE username = #{username}
	</select>
	<!-- 添加user信息 -->
	<insert id="insertUser" useGeneratedKeys="true" keyProperty="id"
		keyColumn="id" parameterType="com.zzuli.lesson.bean.User">
		insert into
		user(
		username ,
		password,
		role_id,
		tea_name,
		create_time,
		modifield_time
		)
		values
		(#{username},#{password},2,#{teaName},now(),now())
	</insert>
	
</mapper>